# ADR-0003: Workspace patch format is Codex apply_patch envelope

Status
- Accepted

Context
- Phase 1 requires an atomic patch apply mechanism for coding agents.
- Open Responses does not normatively specify a patch encoding for local workspaces.
- The harness must have a deterministic, unambiguous patch representation that can be generated by models and replayed.

Decision
- Adopt the Codex-style patch envelope as the Phase 1 patch apply format:
  - `*** Begin Patch` / `*** End Patch`
  - `*** Add File: <path>` with `+`-prefixed content lines
  - `*** Update File: <path>` with optional `*** Move to: <path>` and `+/-/ ` hunk lines
  - `*** Delete File: <path>`

Consequences
- Patch application is deterministic and tool-friendly.
- Provider-boundary tool calls may require adapter mapping into this format when using non-function tool variants.
